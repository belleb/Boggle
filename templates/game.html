<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Thesaurus Rex</title>
  <meta name="author" content="Isabel Leal">
  <meta name="description" content="Single player word game">
  
  <!-- –––––––––––––––––––––––––––––––––––––
   Thesaurus Rex is © 2019 Isabel Leal
   https://isabelleal.org
   
   See the code behind this site at 
   https://github.com/belleb/Thesaurus-Rex
  –––––––––––––––––––––––––––––––––––––– -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-133684021-1"></script>
  <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());

   gtag('config', 'UA-133684021-1');
  </script>

  <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">

  <link rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAIAICAAAAEAIACoEAAAJgAAABAQAAABACAAaAQAAM4QAAAoAAAAIAAAAEAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRBEhEUQRhxFEEa0RRBHHEUQRyhFEEXYRRBEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFEEQ4RRBGgEUQR/xFEEfMRRBGXEUQRNRFEEQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFEEXMRRBH/EUQRvBFEESQAAAAAAAAAABFEEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFEEQAAAAAAEUQRahFEEf8RRBGIEUQRCgAAAAARRBEAEUQRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRBEAAAAAAAAAAAAAAAAAAAAAABFEEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARRBFjEUQR/xFEEXsRRBEEAAAAABFEEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFEEQAAAAAAAAAAAAAAAAARRBESEUQRSRFEEUkRRBECAAAAAAAAAAARRBEAEUQRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFEEUARRBHaEUQR/xFEEYoRRBEOAAAAABFEEQARRBEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFEES8RRBGJEUQReRFEEeYRRBH/EUQR/xFEEe8RRBG2EUQRVwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEUQRAhFEEZ8RRBH/EUQR/xFEEeERRBFcEUQRBAAA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">

  <meta name="viewport" content="width=500, initial-scale=1">

  <style>
    body{
      font-family: 'Noto Sans', sans-serif;
      text-align: center;
    }
    table{
      -webkit-user-select: none;  /* Chrome all / Safari all */
      -moz-user-select: none;     /* Firefox all */
      -ms-user-select: none;      /* IE 10+ */
      user-select: none;          /* Likely future */
      margin: 0 auto;
      text-align: center;
      border: 8px solid #114411;
      border-radius: 10px;
      font-size: 28pt;
      background-color: #999999;
    }
    td, tr{
      border: 1px solid black;
      background-color: white;
      border-radius: 5px;
    }
    td{
      width: 85px;
      height: 85px;
      background-image: radial-gradient(white,white,white,#fefefe,#f6f6f6,#eeeeee,#e0e0e0, #dddddd);
    }
    h1{
      text-align: center;
    }
    #time-alert{
      color: red;
      text-align: center;
    }
    #word_box{
      margin: 5px auto;
      text-align: center;
    }
    input{
      border-radius:10px;
      height: 30px;
      width: 100px;
      color:#114411;
    }
    #rules{
      display: none;
      width: 400px;
      margin: 0 auto;
      font-size: 9pt;
      text-align: justify;
      margin-bottom:50px;
    }
    #header_link{
      text-decoration: none;
      color: #114411;
    }
    #language_area{
      position: absolute; 
      top: 50px; 
      right:50px; 
      color: #999999;
      border: 1px solid #cccccc; 
      border-radius: 5px; 
      cursor: default;
    }
    #language_area div{
      display: inline-block;
      border-radius: 5px;
      padding: 5px;
      margin: 3px;
      cursor: pointer;
    }
    #language_area img{
      width: 32px;
      height: 21px;
      vertical-align: bottom;
    }
    #language_area div:hover{
      background-color: #eeeeee;
      color: #114411;
    }
    #starting_buttons{
      text-align: center;
      margin: 4px auto;
    }
    #actualword{
      font-size: 18pt;
      text-align: center;
      width: 300px;
    }
    #submit_button{
      visibility: hidden;
      width: 0px;
      height: 0px;
      margin: 0px;
      padding: 0px;
    }
    #scoreboard{
      text-align: left;
    }
  </style>
</head>
<body onload="doEverything();">

  <h1>
    <a id="header_link" href="">Thesaurus Rex</a>
  </h1>
  
  <table>
    <tbody id="board">
      <tr><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td></tr>
      <tr><td></td><td></td><td></td><td></td><td></td></tr>
    </tbody>
  </table>
 
  <div id="word_box">
    <form action="" onsubmit="submitForm(); return false;" autocomplete="off">
      <input type="text" name="word" id="actualword" placeholder="Enter word here" maxlength="25" size="25">
      <input type="hidden" name="board_ID" value="{{id}}"><br>
      <input type="submit" id="submit_button">
    </form>
  </div>
  
  <div id="time-alert">
    <span id="time-text-1"></span>
    <span id="time"></span>
    <span id="time-text-2"></span>
  </div>
  
  <div id="scoreboard">
    <span id="score-text"></span>:
    <span id="score">{{score}}</span>
  </div>
 
  <script>
    var address = 'http://thesaurus-rex.org';
    var language = "{{language}}";
    
    function applyLanguage()
    { 
      // header link
      var header_link = document.getElementById("header_link");
      header_link.href = address + "/" + language;
      
      // word box placeholder text
      var actualword = document.getElementById("actualword");
      actualword.placeholder = (language === 'pt') ? "Digite sua palavra" : "Enter word here";
      
      // time text
      var time_text_1 = document.getElementById("time-text-1");
      time_text_1.textContent = (language === 'pt') ? "Tempo restante:" : "Game ends in";
      var time_text_2 = document.getElementById("time-text-2");
      time_text_2.textContent = (language === 'pt') ? "minutos" : "minutes";
      
      // score text
      var score_text = document.getElementById("score-text");
      score_text.textContent = (language === 'pt') ? "Pontuação" : "Score";
    }
    
    function submitForm() 
    {
      // get word to be submitted
      var actualword = document.getElementById("actualword");
      var normalized_word = actualword.value.normalize('NFD').replace(/[\u0300-\u036f]/g, "");
      
      // prepare request
      var http = new XMLHttpRequest();
      http.open("GET", address + "/" + language + "/game/{{id}}/" + normalized_word, true);
      http.responseType = 'text';
      
      // what to do if request went well
      http.onload = function()
      {
        if (http.readyState === http.DONE)
        {
          if (http.status === 200)
          {
            // update the scoreboard
            var new_score = http.responseText;
            var score_area = document.getElementById("score");
            
            // test if backend is returning a redirect
            if (new_score.length < 20)
            {
              score_area.textContent = new_score;
            }
          }
        }
      }
      
      // clear word form
      actualword.value = "";
      
      // send request
      http.send();
    }

    // what to do when page loads
    function doEverything()
    {
      // apply language preference
      applyLanguage();
    
      // fill in board with letters given by backend
      var board = document.getElementById("board");
      var i = 0;
      var s = "{{letters}}";
      var rows = board.children;
      for (var j=0; j<5; j++)
      {
        var entries = rows[j].children;
        for (var k=0; k<5; k++)
        {
          var entry = entries[k];
          entry.textContent = s[i];
          i++;
        }
      }
      
      // start the timer with the amount of time given by backend
      var duration = {{time_diff}},
      display = document.getElementById("time");
      startTimer(duration, display);
    }
    
    // define a timer
    function startTimer(duration, display) 
    {
      var start = Date.now(), diff, minutes, seconds;
      var flag  = false;
      function timer() 
      {
        // test if time is up
        if ((duration - (Date.now() - start)) <= 900)
        {
          if (flag === false){
          flag = true;
          location.reload();
          }
        }
        else
        {
          // get the number of seconds left
          diff = (((duration - Date.now() + start) / 1000) | 0);
          
          // does the same job as parseInt truncates the float
          minutes = (diff / 60) | 0;
          seconds = (diff % 60) | 0;

          minutes = minutes < 10 ? "0" + minutes : minutes;
          seconds = seconds < 10 ? "0" + seconds : seconds;

          display.textContent = minutes + ":" + seconds;
        }
      }

      timer();
      setInterval(timer, 1);
    }
 </script>

</body>
</html>